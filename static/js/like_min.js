function likeMessage(messageId){const likeButton=document.getElementById(`like-${messageId}`);let currentLikes=parseInt(likeButton.textContent.split(" ")[0]);likeButton.disabled=true;fetch(`/wall/like/${messageId}`,{method:"POST"}).then(response=>{if(response.ok){return response.json()}else{alert("点赞失败")}}).then(data=>{if(data.success){if(data.action=="cancel"){likeButton.classList.remove("liked");likeButton.style.backgroundColor="transparent";likeButton.style.color="black"}else{likeButton.classList.add("liked");likeButton.style.backgroundColor="#ff0000";likeButton.style.color="white"}likeButton.textContent=`${data.likes} 👍`}else{likeButton.textContent=`${currentLikes} 👍`;console.log(data.error)}}).finally(()=>{likeButton.disabled=false})}function dislikeMessage(messageId){const dislikeButton=document.getElementById(`dislike-${messageId}`);dislikeButton.disabled=true;fetch(`/wall/dislike/${messageId}`,{method:"POST"}).then(response=>{if(response.ok){return response.json()}else{alert("点踩失败")}}).then(data=>{if(data.success){if(data.action=="cancel"){dislikeButton.classList.remove("disliked");dislikeButton.style.backgroundColor="transparent";dislikeButton.style.color="black"}else{dislikeButton.classList.add("disliked");dislikeButton.style.backgroundColor="#bd841a";dislikeButton.style.color="white"}}else{console.log(data.error)}}).finally(()=>{dislikeButton.disabled=false})}